extends layout

block append site_scripts
	script(src="/javascripts/events.js")
	
block append site_styles
	

block content
	include navbar

	div(class="large-7 small-12 columns")
		h4.subheader Tapahtumat
		
		div#eventList(style="display: block")
			div.large-12.small-12.columns.panel(data-bind="foreach: eventList")
				div.large-12.small-12.columns
					h4.subheader(data-bind="text: name", style="display: inline; font-size: 120%")
					br
					h5.subheader(data-bind="text: moment(startDate()).format('DoMM.YYYY')", style="display: inline")
					|&nbsp;-&nbsp;
					h5.subheader(data-bind="text: moment(endDate()).format('DoMM.YYYY')", style="display: inline")
					a(href="#tulokset", data-bind="click: $root.getMatchesForEvent.bind($data, _id, name)", style="display: inline").right
						|näytä pelit...
					p
					p

		//div.row
			a.button(data-bind="click: login") Login
			pre(data-bind="text: ko.toJSON(session, null, 2)")


	div(class="large-5 small-12 columns")
	
	
		//<script id="feed-1385119291110789" type="text/javascript" src="http://rss.bloople.net/?url=http%3A%2F%2F192.81.223.221%3A3000%2Flsq.xml&limit=1&showtitle=false&type=js&id=1385119291110789"></script>	
	
		h4#tulokset.subheader(data-bind="text: matchListHeader")
		div.large-12.small-12.columns(data-bind="foreach: matchList", style="padding: 2px")
	
			// ko if: ($index() === 0)
	
			div.large-12.small-12.columns.site_gameList.left(data-bind="text: moment(startTime()).format('dddd, DoMoYYYY')", style="color: #9f9f9f; font-size: 13px")
			hr
		
			// /ko
		
			// ko if: $index() > 0 && moment($parent.matchList()[$index() -1].startTime()).format('DDDYY') !== moment(startTime()).format('DDDYY')

			div.large-12.small-12.columns.site_gameList.left(data-bind="text: moment(startTime()).format('dddd, DoMoYYYY')", style="color: #9f9f9f; font-size: 13px")
			hr
		
			// /ko
		
			div.large-12.small-12.columns.site_gameList.gameListHeader(data-bind="click: $root.toggleVisible")
					div.large-4.small-4.columns.site_gameList(data-bind="text: playerOneName", style="text-align: right")
					div.large-4.small-4.columns.site_gameList(style="text-align: center")
						span(data-bind="text: p1GamesWon")
						|&nbsp;-&nbsp;
						span(data-bind="text: p2GamesWon")
					div.large-4.small-4.columns.site_gameList(data-bind="text: playerTwoName", style="text-align: left")
		
				div.large-12.small-12.columns.site_gameList.gameScores(style="display:none", data-bind="if: gameScores().length > 0")
						hr

						div(data-bind="foreach: gameScores", style="text-align: center; padding-bottom: 4px").large-12.small-12.columns

							span(data-bind="text: p1score")
							|-
							span(data-bind="text: p2score")
							span(data-bind="if: ($index() !== ($parent.gameScores().length - 1))")
								|,&nbsp;

						//hr


				
	div.large-12.small-12.columns.show-for-small(style="height: 36px; background: #e9e9e9")
		&nbsp;



